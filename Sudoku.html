<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Sudoku - ThangMedia</title>
    <style>
        /* Retro computer monitor background */
        body {
            font-family: Arial, sans-serif;
            background: repeating-linear-gradient(
                0deg,
                #000 0px,
                #000 1px,
                #fff 1px,
                #fff 2px
            );
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        
        /* Window container */
        .window {
            background: white;
            border: 4px solid black;
            margin: 0 auto;
            max-width: 1100px;
            box-shadow: 0 0 0 2px #000;
        }
        
        /* Title bar with striped pattern */
        .title-bar {
            background: repeating-linear-gradient(
                90deg,
                #000 0px,
                #000 2px,
                #fff 2px,
                #fff 4px
            );
            border-bottom: 2px solid black;
            padding: 8px;
            display: table;
            width: 100%;
            box-sizing: border-box;
        }
        
        .title-bar-left {
            display: table-cell;
            width: 40px;
            vertical-align: middle;
        }
        
        .title-bar-center {
            display: table-cell;
            text-align: center;
            vertical-align: middle;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }
        
        .title-bar-right {
            display: table-cell;
            width: 200px;
            text-align: right;
            vertical-align: middle;
        }
        
        .close-btn {
            width: 30px;
            height: 30px;
            background: white;
            border: 2px solid black;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: inline-block;
            line-height: 26px;
        }
        
        .close-btn:active {
            background: black;
            color: white;
        }
        
        .title-btn {
            background: white;
            border: 2px solid black;
            padding: 5px 10px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            margin-left: 5px;
        }
        
        .title-btn:active {
            background: black;
            color: white;
        }
        
        /* Game board area */
        .game-area {
            padding: 15px;
            background: white;
        }
        
        /* Bàn cờ */
        #grid {
            border-collapse: collapse;
            margin: 10px auto;
            border: 2px solid black;
        }
        
        #grid td {
            width: 85px;
            height: 85px;
            border: 1px solid #999;
            text-align: center;
            font-size: 36px;
            font-weight: bold;
            cursor: pointer;
            background: white;
        }
        
        /* Đường kẻ đậm chia khối 3x3 */
        #grid td:nth-child(3n) {
            border-right: 2px solid black;
        }
        
        #grid tr:nth-child(3n) td {
            border-bottom: 2px solid black;
        }
        
        /* Cạnh ngoài cùng */
        #grid td:last-child {
            border-right: 1px solid #999;
        }
        
        #grid tr:last-child td {
            border-bottom: 1px solid #999;
        }
        
        .fixed {
            font-weight: bold;
            color: black;
            background: #eee;
        }
        
        .selected {
            background: black;
            color: white;
        }
        
        /* Bàn phím số ảo */
        .numpad {
            padding: 15px;
            background: white;
            border-top: 2px solid black;
        }
        
        .pad-row {
            text-align: center;
            margin: 5px 0;
        }
        
        .num-btn {
            width: 60px;
            height: 60px;
            border: 2px solid black;
            margin: 3px;
            font-size: 28px;
            font-weight: bold;
            text-align: center;
            line-height: 60px;
            cursor: pointer;
            display: inline-block;
            background: white;
        }
        
        .num-btn:active {
            background: black;
            color: white;
        }
        
        .back-link {
            display: block;
            margin-top: 20px;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid black;
            padding: 10px;
            background: white;
            color: black;
        }
    </style>
</head>
<body>

    <div class="window">
        <!-- Title Bar -->
        <div class="title-bar">
            <div class="title-bar-left">
                <div class="close-btn" onclick="window.location.href='index.html'">X</div>
            </div>
            <div class="title-bar-center">Sudoku</div>
            <div class="title-bar-right">
                <button class="title-btn" onclick="checkGame()">Check</button>
                <button class="title-btn" onclick="solveGame()">Solve</button>
                <button class="title-btn" onclick="newGame()">New</button>
            </div>
        </div>
        
        <!-- Game Board -->
        <div class="game-area">
            <table id="grid"></table>
        </div>
        
        <!-- Number Pad -->
        <div class="numpad">
            <div class="pad-row">
                <div class="num-btn" onclick="setNum(1)">1</div>
                <div class="num-btn" onclick="setNum(2)">2</div>
                <div class="num-btn" onclick="setNum(3)">3</div>
                <div class="num-btn" onclick="setNum(4)">4</div>
                <div class="num-btn" onclick="setNum(5)">5</div>
            </div>
            <div class="pad-row">
                <div class="num-btn" onclick="setNum(6)">6</div>
                <div class="num-btn" onclick="setNum(7)">7</div>
                <div class="num-btn" onclick="setNum(8)">8</div>
                <div class="num-btn" onclick="setNum(9)">9</div>
                <div class="num-btn" onclick="setNum('')">X</div>
            </div>
        </div>
    </div>
    
    <a href="index.html" class="back-link">BACK TO HOME</a>

    <script>
        var selectedCell = null;
        
        // Map đề bài đơn giản (Hardcode cho nhẹ máy)
        // 0 là ô trống
        var puzzles = [
            [
                5,3,0,0,7,0,0,0,0,
                6,0,0,1,9,5,0,0,0,
                0,9,8,0,0,0,0,6,0,
                8,0,0,0,6,0,0,0,3,
                4,0,0,8,0,3,0,0,1,
                7,0,0,0,2,0,0,0,6,
                0,6,0,0,0,0,2,8,0,
                0,0,0,4,1,9,0,0,5,
                0,0,0,0,8,0,0,7,9
            ]
        ];

        function newGame() {
            var table = document.getElementById("grid");
            table.innerHTML = "";
            var puzzle = puzzles[0]; // Lấy đề bài đầu tiên

            for (var r = 0; r < 9; r++) {
                var tr = document.createElement("tr");
                for (var c = 0; c < 9; c++) {
                    var td = document.createElement("td");
                    var val = puzzle[r * 9 + c];
                    
                    if (val !== 0) {
                        td.innerText = val;
                        td.className = "fixed";
                    } else {
                        // Ô trống cần điền
                        td.onclick = (function(elem) {
                            return function() { selectCell(elem); };
                        })(td);
                    }
                    tr.appendChild(td);
                }
                table.appendChild(tr);
            }
            
            // Xóa selection
            selectedCell = null;
        }

        function selectCell(elem) {
            // Xóa highlight cũ
            if (selectedCell) {
                selectedCell.classList.remove("selected");
            }
            
            selectedCell = elem;
            if (!selectedCell.classList.contains("fixed")) {
                selectedCell.classList.add("selected");
            }
        }

        function setNum(num) {
            if (selectedCell && !selectedCell.classList.contains("fixed")) {
                selectedCell.innerText = num;
                selectedCell.classList.remove("selected");
                selectedCell = null;
            }
        }
        
        function checkGame() {
            var table = document.getElementById("grid");
            var isValid = true;
            var errors = [];
            
            // Kiểm tra từng hàng
            for (var r = 0; r < 9; r++) {
                var rowNums = [];
                for (var c = 0; c < 9; c++) {
                    var val = table.rows[r].cells[c].innerText.trim();
                    if (val && rowNums.indexOf(val) !== -1) {
                        isValid = false;
                        errors.push("Row " + (r+1) + " has duplicate: " + val);
                    }
                    if (val) rowNums.push(val);
                }
            }
            
            // Kiểm tra từng cột
            for (var c = 0; c < 9; c++) {
                var colNums = [];
                for (var r = 0; r < 9; r++) {
                    var val = table.rows[r].cells[c].innerText.trim();
                    if (val && colNums.indexOf(val) !== -1) {
                        isValid = false;
                        errors.push("Column " + (c+1) + " has duplicate: " + val);
                    }
                    if (val) colNums.push(val);
                }
            }
            
            // Kiểm tra từng khối 3x3
            for (var block = 0; block < 9; block++) {
                var blockNums = [];
                var startR = Math.floor(block / 3) * 3;
                var startC = (block % 3) * 3;
                for (var r = startR; r < startR + 3; r++) {
                    for (var c = startC; c < startC + 3; c++) {
                        var val = table.rows[r].cells[c].innerText.trim();
                        if (val && blockNums.indexOf(val) !== -1) {
                            isValid = false;
                            errors.push("Block " + (block+1) + " has duplicate: " + val);
                        }
                        if (val) blockNums.push(val);
                    }
                }
            }
            
            if (isValid && errors.length === 0) {
                // Kiểm tra xem đã điền đủ chưa
                var filled = 0;
                for (var r = 0; r < 9; r++) {
                    for (var c = 0; c < 9; c++) {
                        if (table.rows[r].cells[c].innerText.trim()) filled++;
                    }
                }
                if (filled === 81) {
                    alert("CONGRATULATIONS! You solved the Sudoku!");
                } else {
                    alert("No errors found, but " + (81-filled) + " cells are still empty.");
                }
            } else {
                var errorMsg = "ERRORS FOUND:\n";
                for (var i = 0; i < Math.min(3, errors.length); i++) {
                    errorMsg += errors[i] + "\n";
                }
                if (errors.length > 3) errorMsg += "...";
                alert(errorMsg);
            }
        }
        
        function solveGame() {
            alert("Solve feature coming soon!");
        }

        newGame();
    </script>
</body>
</html>
